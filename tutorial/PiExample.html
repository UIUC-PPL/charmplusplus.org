<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta charset="utf-8">
    <title>Charm++: Tutorial</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
		<link href="/assets/charmwebsite.css" rel="stylesheet" type="text/css"/>
		<link href="http://fonts.googleapis.com/css?family=Puritan" rel="stylesheet" type="text/css"/>
		<link href="http://fonts.googleapis.com/css?family=Droid Sans" rel="stylesheet" type="text/css"/>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript">
		</script>
		<script src="/codemirror/lib/codemirror.js" type="text/javascript">
		</script>
		<script src="/codemirror/mode/clike/clike.js" type="text/javascript">
		</script>
		<script src="/codemirror/lib/util/runmode.js" type="text/javascript">
		</script>
		<link href="/codemirror/lib/codemirror.css" rel="stylesheet" type="text/css"/>
		<link href="/codemirror/theme/lesser-dark.css" rel="stylesheet" type="text/css"/>
		<script src="/assets/prettify.js" type="text/javascript">
		</script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
		<!-- for equations from LaTeX to appear correctly-->
		<script type="text/javascript" src="http://latex.codecogs.com/latexit.js"></script>
		
    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 4.7.5"> 
  </head>

  <body>
    <div class="container">
			
 <nav class="navbar navbar-default" role="navigation">
	<div class="container-fluid">
	  <!-- Brand and toggle get grouped for better mobile display -->
		<div id="logo"><a href="/"><img class="img-responsive" src="../images/charm_logo.jpg"></a></div>

<!-- Charm++ Button textformatted placeholder for logo button
		<div class="navbar-header">
	    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
	    </button>
	    <a class="navbar-brand" href="/"><b>Charm++</b></a>
	  </div>
-->

	  <!-- Collect the nav links, forms, and other content for toggling -->
	  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	    <ul class="nav navbar-nav">
              <li class="dropdown">
		<a href="#" class="dropdown-toggle" data-toggle="dropdown">Explore<span class="caret"></span></a>
		<ul class="dropdown-menu" role="menu">
		  <li><a href="/capabilities/">Capabilities</a></li>
		  <li><a href="/progmodel/">Programming Model</a></li>
		  <li><a href="/execmodel/">Execution Model</a></li>
		  <li><a href="/applications/">Applications</a></li>
		  <li><a href="http://charm.cs.illinois.edu/papers/">Publications</a></li>
		  <li><a href="/history/">History</a></li>
		</ul>
              </li>
              <li class="dropdown">
		<a href="#" class="dropdown-toggle" data-toggle="dropdown">Learn <span class="caret"></span></a>
		<ul class="dropdown-menu" role="menu">
		  <li><a href="https://charm.readthedocs.io/en/latest/charm++/manual.html#installing-charm">Installation</a></li>
      		  <li><a href="/tutorial/">Tutorial</a></li>
						<li><a href="/exercises/">Exercises</a></li>
      		  <li><a href="/help/">Manual</a></li>
      		  <li><a href="/tools/">Tools</a></li>
      		  <li><a href="/othermedia/">Other Media</a></li>
		</ul>
              </li>

              <li class="dropdown">
		<a href="#" class="dropdown-toggle" data-toggle="dropdown">Follow <span class="caret"></span></a>
		<ul class="dropdown-menu" role="menu">
		  <li><a href="https://github.com/UIUC-PPL/charm/commits/master">Recent Commits</a></li>
      	  <li><a href="https://github.com/UIUC-PPL/charm/issues">Issue Tracker</a></li>
      	  <li><a href="http://charm.cs.illinois.edu/autobuild/cur/">Nightly Tests</a></li>
      	  <li><a href="https://lists.cs.illinois.edu/lists/info/charm">Mailing Lists</a></li>
      	  <li><a href="http://charm.cs.illinois.edu/gerrit/#/admin/projects/">Other Repositories</a></li>
      	  <li><a href="http://ppl.cs.illinois.edu">PPL Website</a></li>
		</ul>
              </li>

              <li class="dropdown">
		<a href="/download/">Downloads</a>
              </li>

              <li class="dropdown">
		<a href="/miniApps/">Mini-Apps</a>
              </li>

	    </ul>
	  <form class="navbar-form navbar-right" role="search" method="get" action="http://www.google.com/search">
              <div class="form-group">
		<input type="hidden" name="sitesearch" value="charmplusplus.org"></input>
		<input type="text" class="form-control" name="q" placeholder="Search"></input>
              </div>
              <button type="submit" class="btn btn-default">Submit</button>
	    </form>
	  </div><!-- /.navbar-collapse -->
	</div><!-- /.container-fluid -->
      </nav>


 <div id="maincontainer">
   <div id="content">
     
  <link rel="stylesheet" type="text/css" href="TutorialStyle.css">
  
  <h1>Introducing Reductions</h1>  


  <h3>Reductions</h3>
  
  <p class="BasicParagraph">
   By now, we've spent a lot of time in this tutorial talking about how to decompose problems
   into chares and distribute them across processors.  That's great, but what good is splitting
   up your problem if you can't put it back together? When you need to combine values from an array
   of chares, you can turn to one of the most important parallel programming tools: a <i>reduction</i>.
  </p>

  <p class="BasicParagraph">
   Reductions turn data that is scattered across a chare array into a single value using a reduction
   operation, such as sum or maximum. Each of the chares in the array contribute some local data
  </P>

  <h2>"Hello World" Code</h2>

  <h3>The "Hello" Chare Class</h3>

  <!-- Figure -->
  <center>
   <table class="StandardFigure" border=0 cellspacing=0 cellpadding=5>
    <tr>

     <td>
      <table border=0 cellspacing=0 cellpadding=5>

       <!-- Header File -->
       <tr>
        <td align=center valign=middle bgColor=bbbbbb><b><u>Header File <i>(hello.h)</i></u></b></td>
       </tr>
       <tr>
        <td align=left valign=top bgColor=bbbbbb>
         <div class="code">
          <code>
           #ifndef __HELLO_H__<br>
           #define __HELLO_H__<br>
           <br>
           class Hello : public CBase_Hello {<br>
           <br>
           &nbsp;public:<br>
           <br>
           &nbsp;&nbsp;<font class="codeComment">/// Constructors ///</font><br>
           &nbsp;&nbsp;Hello();<br>
           &nbsp;&nbsp;Hello(CkMigrateMessage *msg);<br>
           <br>
           &nbsp;&nbsp;<font class="codeComment">/// Entry Methods ///</font><br>
           &nbsp;&nbsp;void sayHi(int from);<br>
           };<br>
           <br>
           #endif //__HELLO_H__
          </code>
         </div>
        </td>
       </tr>

       <!-- Interface File -->
       <tr>
        <td align=center valign=middle bgColor=bbbbbb><b><u>Interface File <i>(hello.ci)</i></u></b></td>
       </tr>
       <tr>
        <td align=left valign=top bgColor=bbbbbb>
         <div class="code">
          <code>
           module hello {<br>
           <br>
           &nbsp;&nbsp;array [1D] Hello {<br>
           &nbsp;&nbsp;&nbsp;&nbsp;entry Hello();<br>
           &nbsp;&nbsp;&nbsp;&nbsp;entry void sayHi(int);<br>
           &nbsp;&nbsp;};<br>
           <br>
           };
          </code>
         </div>
        </td>
       </tr>

      </table>
     </td>



     <td>
      <table border=0 cellspacing=0 cellpadding=5>

       <!-- Source File -->
       <tr>
        <td align=center valign=middle bgColor=bbbbbb><b><u>Header File <i>(hello.C)</i></u></b></td>
       </tr>
       <tr>
        <td align=left valign=top bgColor=bbbbbb>
         <div class="code">
          <code>
           #include "hello.decl.h"<br>
           <br>
           #include "hello.h"<br>
           #include "main.decl.h"<br>
           <br>
           <br>
           extern /* readonly */ CProxy_Main mainProxy;<br>
           extern /* readonly */ int numElements;<br>
           <br>
           <br>
           Hello::Hello() {<br>
           &nbsp;&nbsp;// Nothing to do when the Hello chare object is created.<br>
           &nbsp;&nbsp;//   This is where member variables would be initialized<br>
           &nbsp;&nbsp;//   just like in a C++ class constructor.<br>
           }<br>
           <br>
           <br>
           // Constructor needed for chare object migration (ignore for now)<br>
           // NOTE: This constructor does not need to appear in the ".ci" file<br>
           Hello::Hello(CkMigrateMessage *msg) { }<br>
           <br>
           <br>
           void Hello ::sayHi(int from) {<br>
           <br>
           &nbsp;&nbsp;// Have this chare object say hello to the user.<br>
           &nbsp;&nbsp;CkPrintf("\"Hello\" from Hello chare # %d on "<br>
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"processor %d (told by %d).\n",<br>
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thisIndex, CkMyPe(), from);<br>
           <br>
           &nbsp;&nbsp;// Tell the next chare object in this array of chare objects<br>
           &nbsp;&nbsp;//   to also say hello.  If this is the last chare object in<br>
           &nbsp;&nbsp;//   the array of chare objects, then tell the main chare<br>
           &nbsp;&nbsp;//   object to exit the program.<br>
           &nbsp;&nbsp;if (thisIndex < (numElements - 1))<br>
           &nbsp;&nbsp;&nbsp;&nbsp;thisProxy[thisIndex + 1].sayHi(thisIndex);
           &nbsp;&nbsp;else<br>
		      &nbsp;&nbsp;&nbsp;&nbsp;mainProxy.done();
           }<br>
           <br>
           <br>
           #include "hello.def.h"
          </code>
         </div>
        </td>
       </tr>

      </table>
     </td>



   </div>
 </div>
      
      <div id="footer">
	&copy; 2020 
    	<a href="http://ppl.cs.illinois.edu">Parallel Programming Lab</a>,
	<a href="http://cs.illinois.edu">Dept of Computer Science</a>,
	<a href="http://illinois.edu">University of Illinois</a>
      </div>
    </div>
    <script src="/assets/hover.js" type="text/javascript"></script>
  </body>
</html>
