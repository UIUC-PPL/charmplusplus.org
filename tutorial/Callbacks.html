<!DOCTYPE HTML>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta charset="utf-8">
    <title>Charm++: Tutorial</title>

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
		<link href="../assets/charmwebsite.css" rel="stylesheet" type="text/css">
		<link href="https://fonts.googleapis.com/css?family=Puritan" rel="stylesheet" type="text/css">
		<link href="https://fonts.googleapis.com/css?family=Droid%20Sans" rel="stylesheet" type="text/css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript">
		</script>
    <script src="https://charm.cs.illinois.edu/codemirror/lib/codemirror.js" type="text/javascript">
		</script>
    <script src="https://charm.cs.illinois.edu/codemirror/mode/clike/clike.js" type="text/javascript">
		</script>
    <script src="https://charm.cs.illinois.edu/codemirror/lib/util/runmode.js" type="text/javascript">
		</script>
    <link href="https://charm.cs.illinois.edu/codemirror/lib/codemirror.css" rel="stylesheet" type="text/css">
    <link href="https://charm.cs.illinois.edu/codemirror/theme/lesser-dark.css" rel="stylesheet" type="text/css">
    <script src="../assets/prettify.js" type="text/javascript"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
		<!-- for equations from LaTeX to appear correctly-->
		<script type="text/javascript" src="https://latex.codecogs.com/latexit.js"></script>
		
    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 4.7.5"> 
  </head>

  <body>
    <div class="container">
 <nav class="navbar navbar-default" role="navigation">
	<div class="container-fluid">
	  <!-- Brand and toggle get grouped for better mobile display -->
		<div id="logo"><a href="../"><img class="img-responsive" src="../images/charm_logo.jpg"></a></div>

<!-- Charm++ Button textformatted placeholder for logo button
		<div class="navbar-header">
	    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
	    </button>
	    <a class="navbar-brand" href="/"><b>Charm++</b></a>
	  </div>
-->

	  <!-- Collect the nav links, forms, and other content for toggling -->
	  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	    <ul class="nav navbar-nav">
              <li class="dropdown">
		<a href="#" class="dropdown-toggle" data-toggle="dropdown">Explore<span class="caret"></span></a>
		<ul class="dropdown-menu" role="menu">
		  <li><a href="../capabilities/">Capabilities</a></li>
		  <li><a href="../progmodel/">Programming Model</a></li>
		  <li><a href="../execmodel/">Execution Model</a></li>
		  <li><a href="../applications/">Applications</a></li>
		  <li><a href="https://charm.cs.illinois.edu/papers/">Publications</a></li>
		  <li><a href="../history/">History</a></li>
		</ul>
              </li>
              <li class="dropdown">
		<a href="#" class="dropdown-toggle" data-toggle="dropdown">Learn <span class="caret"></span></a>
		<ul class="dropdown-menu" role="menu">
		  <li><a href="https://charm.readthedocs.io/en/latest/charm++/manual.html#installing-charm">Installation</a></li>
      		  <li><a href="./">Tutorial</a></li>
						<li><a href="../exercises/">Exercises</a></li>
      		  <li><a href="../help/">Manual</a></li>
      		  <li><a href="../tools/">Tools</a></li>
      		  <li><a href="../othermedia/">Other Media</a></li>
		</ul>
              </li>

              <li class="dropdown">
		<a href="#" class="dropdown-toggle" data-toggle="dropdown">Follow <span class="caret"></span></a>
		<ul class="dropdown-menu" role="menu">
		  <li><a href="https://github.com/UIUC-PPL/charm/commits/master">Recent Commits</a></li>
      	  <li><a href="https://github.com/UIUC-PPL/charm/issues">Issue Tracker</a></li>
      		  <li><a href="https://charm.cs.illinois.edu/autobuild/cur/">Nightly Tests</a></li>
      	  <li><a href="https://lists.cs.illinois.edu/lists/info/charm">Mailing Lists</a></li>
      		  <li><a href="https://charm.cs.illinois.edu/gerrit/#/admin/projects/">Other Repositories</a></li>
      		  <li><a href="https://charm.cs.illinois.edu">PPL Website</a></li>
		</ul>
              </li>

              <li class="dropdown">
		<a href="../download/">Downloads</a>
              </li>

              <li class="dropdown">
		<a href="../miniApps/">Mini-Apps</a>
              </li>

	    </ul>
	    <form class="navbar-form navbar-right" role="search" method="get" action="https://www.google.com/search">
              <div class="form-group">
		<input type="hidden" name="sitesearch" value="charmplusplus.org">
		<input type="text" class="form-control" name="q" placeholder="Search">
              </div>
              <button type="submit" class="btn btn-default">Submit</button>
	    </form>
	  </div>
<!-- /.navbar-collapse -->
	</div>
<!-- /.container-fluid -->
      </nav>


 <div id="maincontainer">
   <div id="content">
     
  <link rel="stylesheet" type="text/css" href="TutorialStyle.css">
  
  <h1>Callbacks</h1>

  <p class="BasicParagraph">
   Callbacks are used by the Charm++ Runtime System, frameworks, libraries, and so on to notify
   application code that some kind of <i>event</i> has occurred.  For example, reductions use callbacks to
   notify the application code when the reduction has completed.  The basic idea is that the application
   code can specify what <i>action</i> to take when the callback is <i>triggered</i> (i.e. the specific
   <i>event</i> occurs).  The <i>action</i> taken can be a variety of things including calling function or
   having the application exit.
  </p>

  <h3>
<i>"Do Nothing"</i> Callback</h3>

  <p class="BasicParagraph">
   To create a callback object that does nothing, simply create it as follows:
   <b>CkCallback cb(CkCallback::ignore)</b>.  When triggered, the callback does nothing.
  </p>

  <h3>
<i>CkExit</i> Callback</h3>

  <p class="BasicParagraph">
   To create a callback object that will cause CkExit() to be called when the callback is triggered,
   simply create it as follows: <b>CkCallback cb(CkCallback::ckExit)</b>.
  </p>

  <h3>
<i>C Function</i> Callback</h3>

  <p class="BasicParagraph">
   To create a callback object that will cause a C function to be executed, create it as
   follows: <b>CkCallback cb(CkCallbackFunc cFunc, void* param)</b>.  Here, the type of the
   <i>CkCallbackFunc</i> is <b>void myCFunction(void* param, void* msg)</b>.  The <i>param</i>
   pointer used when the callback object was created will be passed to the C function as the
   <i>param</i> parameter.  The <i>msg</i> parameter will point to the message created by whatever
   <i>entity</i> (e.g. a library) triggers the callback.
  </p>

  <h3>
<i>Entry Method</i> Callback</h3>

  <p class="BasicParagraph">
   To create a callback object that will cause an entry method to be called on a chare object,
   create it as follows: <b>CkCallback cb(int entryMethodIndex, CkChareID &amp;id)</b>.  Each entry
   method for a chare class has an associated <i>entry method index</i>.  The <i>entry method
   index</i> is used here to identify which entry method on the chare object (specified by the
   <i>id</i> parameter) should be executed.
  </p>

  <p class="BasicParagraph">
   To get the <i>entry method index</i> for any given
   entry method, do the following:
   <b>int entryMethodIndex = CkIndex_MyChareClass::myEntryMethod(<i>...parameters for entry method...</i>)</b>
   where <i>MyChareClass</i> is the name of the chare class and <i>myEntryMethod</i> is the name
   of the entry method.  The parameters passed to this function are not actually used when retrieving
   the <i>entry method index</i>; they are only used to identify which entry method is actually being
   called in cases where multiple entry methods share the same name (i.e. are overloaded).  For example,
   to get the <i>entry method index</i> for an entry method with the following prototype:
   <b>void MyChareClass::myEntryMethod(int* x)</b> one could use
   <b>int myEntryMethodIndex = CkIndex_MyChareClass::myEntryMethod((int*)NULL)</b>.  (Remember, this is not
   actually calling <i>myEntryMethod</i> so it is alright for the pointer to have a <i>NULL</i> value.  Only
   the type of the parameter is important so overloaded functions can be differentiated.)
  </p>

  <h2>Example Usage</h2>

  <p class="BasicParagraph">
   For an example of how a callback would be created an used, please see the
   <a href="Reductions.html">Reductions Section</a>.
  </p>

  <h2>More Information</h2>

  <p class="BasicParagraph">
   For more information on callbacks, please see
   <a href="http://charm.cs.uiuc.edu/manuals/html/charm++/3_15Callbacks.html">Section 3.15: Callbacks</a> of the
   <a href="http://charm.cs.uiuc.edu/manuals/html/charm++/manual.html">The Charm++ Programming Language Manual</a>
  </p>

   </div>
 </div>
      
      <div id="footer">
	Â© 2020 
    	<a href="https://charm.cs.illinois.edu">Parallel Programming Lab</a>,
	<a href="https://cs.illinois.edu">Dept of Computer Science</a>,
	<a href="https://illinois.edu">University of Illinois</a>
      </div>
    </div>
    <script src="../assets/hover.js" type="text/javascript"></script>
  </body>
</html>
